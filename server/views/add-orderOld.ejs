<%- include('head'); %>
<body>
    <div class = "main">
        <div class = "overflow">
            <div class = "head">
                <a href = "/profile/" class = "hItem">клиент</a>
                <a href = "/order/" class = "active">закази</a>
                <a href = "./try-on.html" class = "hItem">примерка</a>
                <a href = "./balance.html" class = "hItem">баланс клиента</a>
                <a href = "./entered-materials.html" class = "hItem">поступивший материал</a>
                <a href = "" class = "hItem">склад</a>
                <a href = "" class = "hItem">услуги</a>
                <a href = "" class = "hItem">расходы</a>
                <a href = "" class = "hItem">сост ... склад</a>
            </div>
            <div class = "title">
                <h1>создать заказ</h1>
            </div>
            <form class = "orderCont" action = "/order/add" method = "post">
                <div class = "sectionCont">
                    <div class = "section">
                        <p>номер заказа</p>
                        <input disabled value = <%- numberOrder %> type = "number" name = "numberOrder" id = "numberOrder">
                        <p>дата заказа</p>
                        <input type = "date" name = "dateOrder" id = "date">
                        <p>тип заказа</p>
                        <select name = "typeOrder" id = "typeOrder">
                            <option value = 1>выбирайте тип заказа</option>
                            <% kindOrder.forEach((item) => { %>
                                <option data-price = <%- item.price %> value = <%- item._id %>><%= item.name %></option>
                            <% }) %>
                        </select>
                        <p>материал заказчика</p>
                        <textarea name = "customerMaterial" id = "customerMaterial" cols="3" rows="5"></textarea>
                    </div>
                    <div class = "section">
                        <p>сумма заказа</p>
                        <input type = "number" name = "sumOrder" id = "sumOrder">
                        <p>оплачено</p>
                        <input onchange = "handleDebt()" type = "number" name = "paid" id = "paid">
                        <p>долг</p>
                        <input type = "number" name = "debt" id = "debt">
                        <p>статус клиента</p>
                        <select name = "customerStatus" id = "customerStatus">
                            <option value = 1>важный</option>
                            <option value = 2>неважный</option>
                            <option value = 3>vip</option>
                        </select>
                        <p>исполнитель</p>
                        <select name = "executor" id = "executor">
                            <option value = 1>выбирайте испольнителя</option>
                            <% employees.forEach((item) => { %>
                                <option value = <%- item._id %>><%= item.name %></option>
                            <% }) %>
                        </select>
                        <p>ответственный</p>
                        <h2><%= responsible %></h2>
                    </div>
                    <div class = "section">
                        <p>заметки</p>
                        <textarea name = "notice" id = "notice" cols="25" rows="5"></textarea>
                        <p>клиент</p>
                        <select name = "client" id = "client">
                            <option value = 1>выбирайте клиента</option>
                            <% customer.forEach((item) => { %>
                                <option value = <%- item._id %>><%= item.name %></option>
                            <% }) %>
                        </select>
                    </div>
                </div>
                <div class = "buttonCont">
                    <a class = "cancel cancelHover" href = "/order/">отмена</a>
                    <input class = "submit buttonHover" type = "submit" value = "добавить">
                </div>
            </form>
        </div>
    </div>
</body>
<script>
let typeOrder = document.getElementById('typeOrder')
let sumOrder = document.getElementById('sumOrder')
let paid = document.getElementById('paid')
let debt = document.getElementById('debt')
let form = document.getElementsByClassName('orderCont')
let template = document.getElementById('template')
const ordersPrice = {
    sharf: 1000,
    shapka: 25000
}
const handleChange = (e) => console.log(e)
typeOrder.addEventListener('change', handleChange)

const handleDebt = () => debt.value = sumOrder.value - paid.value 

</script>
</html>